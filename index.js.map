{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50600363-124150c1580125848cace6785';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\nexport async function getImagesByQuery(query, page){\nconst params = {\n    key: API_KEY,\n    q: query,\n    page: page,\n    per_page: PER_PAGE,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n};\nconst response = await axios.get (BASE_URL, {params});\nreturn response.data; \n}\n","import SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst photoGallery = document.querySelector ('.gallery');\nconst loadMoreBtn = document.querySelector ('.load-more')\nconst loader = document.getElementById ('loader');\nconst lightbox = new SimpleLightbox('.gallery a');\nexport function createGallery(images){\nconst markup = images\n.map(({webformatURL,largeImageURL, tags, likes, views, comments, downloads}) =>\n`<li class = 'gallery-item'>\n<a href = \"${largeImageURL}\">\n    <img src = \"${webformatURL}\" alt = \"${tags}\"/>\n    </a>\n    <div class=\"info\">\n    <p><b>Likes:</b>${likes}</p>\n    <p><b>Views:</b>${views}</p>\n    <p><b>Comments:</b>${comments}</p>\n    <p><b>Downloads:</b>${downloads}</p>\n    </div>\n    </li>`)\n.join('');\nphotoGallery.insertAdjacentHTML ('beforeend', markup);\nlightbox.refresh();\n}\n\nexport function clearGallery(){\nphotoGallery.innerHTML='';\n}\n\nexport function showLoader(){\nloader.classList.remove ('is-hidden');\n}\n\nexport function hideLoader(){\nloader.classList.add ('is-hidden');\n}\nexport function showLoadMoreButton() {\nloadMoreBtn.classList.remove('is-hidden');\n}\nexport function hideLoadMoreButton() {\nloadMoreBtn.classList.add('is-hidden)')\n}\n","import iziToast from \"izitoast\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport {getImagesByQuery} from './js/pixabay-api.js';\nimport {createGallery, clearGallery,  showLoader,  hideLoader, showLoadMoreButton, hideLoadMoreButton} from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', async e =>{\n    e.preventDefault();\n\n query = e.target.elements['search-text'].value.trim();\n page = 1;\nif(!query){\n    iziToast.Toast.warning({\n        message: 'Please enter a search query.', \n        position: 'topRight'\n    });\n    return;\n}\nclearGallery();\nhideLoadMoreButton();\nshowLoader();\n\ntry{\n    const data = await getImagesByQuery(query, page);\n    totalHits = data.totalHits;\n    if(data.hits.length === 0){\n        iziToast.error({\n            message:'Sorry, there are no images matching your search query.',\n            position: 'topRight',\n        });\n        return;\n    } \n      createGallery(data.hits);\n    if (totalHits > 15) {\n        showLoadMoreButton();\n    }\n} catch (error){\n    iziToast.error({\n        message:'Something went wrong. Please try again later.',\n        position: 'topRight',\n    });\n} finally {\n    hideLoader();\n}\n});\n\nloadMoreBtn.addEventListener ('click', async ()=> {\n    page += 1;\n    showLoader();\n\ntry {\n    const data = await getImagesByQuery (query, page);\n    createGallery(data.hits);\n    const image = document.querySelector('.gallery-item');\n    const imageHeight = image.getBoundingClientRect().height;\n    window.scrollBy({top:imageHeight * 2, behaviouur:'smooth'});\n    const loadedImages = document.querySelectorAll('.gallery-item').length;\n    if (loadedImages >=totalHits){\n        hideLoadMoreButton();\n        iziToast.error({\n            message:'We are sorry, but you have reached the end of search results.',\n        });\n    }\n}catch (error){\n    iziToast.error({\n        message:'Failed to load more images.',\n    });\n}finally{\n    hideLoader();\n}\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","params","axios","photoGallery","loadMoreBtn","loader","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","totalHits","e","iziToast","data","imageHeight"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GACV,eAAeC,EAAiBC,EAAOC,EAAK,CACnD,MAAMC,EAAS,CACX,IAAKN,EACL,EAAGI,EACH,KAAMC,EACN,SAAUH,EACV,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EAEA,OADiB,MAAMK,EAAM,IAAKN,EAAU,CAAC,OAAAK,CAAM,CAAC,GACpC,IAChB,CCbA,MAAME,EAAe,SAAS,cAAe,UAAU,EACjDC,EAAc,SAAS,cAAe,YAAY,EAClDC,EAAS,SAAS,eAAgB,QAAQ,EAC1CC,EAAW,IAAIC,EAAe,YAAY,EACzC,SAASC,EAAcC,EAAO,CACrC,MAAMC,EAASD,EACd,IAAI,CAAC,CAAC,aAAAE,EAAa,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAC1E;AAAA,aACaL,CAAa;AAAA,kBACRD,CAAY,YAAYE,CAAI;AAAA;AAAA;AAAA,sBAGxBC,CAAK;AAAA,sBACLC,CAAK;AAAA,yBACFC,CAAQ;AAAA,0BACPC,CAAS;AAAA;AAAA,UAEzB,EACT,KAAK,EAAE,EACRd,EAAa,mBAAoB,YAAaO,CAAM,EACpDJ,EAAS,QAAO,CAChB,CAEO,SAASY,GAAc,CAC9Bf,EAAa,UAAU,EACvB,CAEO,SAASgB,GAAY,CAC5Bd,EAAO,UAAU,OAAQ,WAAW,CACpC,CAEO,SAASe,GAAY,CAC5Bf,EAAO,UAAU,IAAK,WAAW,CACjC,CACO,SAASgB,GAAqB,CACrCjB,EAAY,UAAU,OAAO,WAAW,CACxC,CACO,SAASkB,GAAqB,CACrClB,EAAY,UAAU,IAAI,YAAY,CACtC,CCpCA,MAAMmB,EAAO,SAAS,cAAc,OAAO,EACrCnB,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIL,EAAQ,GACRC,EAAO,EACPwB,EAAY,EAEhBD,EAAK,iBAAiB,SAAU,MAAME,GAAI,CAK1C,GAJIA,EAAE,eAAc,EAEnB1B,EAAQ0B,EAAE,OAAO,SAAS,aAAa,EAAE,MAAM,OAC/CzB,EAAO,EACL,CAACD,EAAM,CACN2B,EAAS,MAAM,QAAQ,CACnB,QAAS,+BACT,SAAU,UAClB,CAAK,EACD,MACJ,CACAR,IACAI,IACAH,IAEA,GAAG,CACC,MAAMQ,EAAO,MAAM7B,EAAiBC,EAAOC,CAAI,EAE/C,GADAwB,EAAYG,EAAK,UACdA,EAAK,KAAK,SAAW,EAAE,CACtBD,EAAS,MAAM,CACX,QAAQ,yDACR,SAAU,UACtB,CAAS,EACD,MACH,CACClB,EAAcmB,EAAK,IAAI,EACrBH,EAAY,IACZH,GAER,MAAe,CACXK,EAAS,MAAM,CACX,QAAQ,gDACR,SAAU,UAClB,CAAK,CACL,QAAU,CACNN,GACJ,CACA,CAAC,EAEDhB,EAAY,iBAAkB,QAAS,SAAW,CAC9CJ,GAAQ,EACRmB,IAEJ,GAAI,CACA,MAAMQ,EAAO,MAAM7B,EAAkBC,EAAOC,CAAI,EAChDQ,EAAcmB,EAAK,IAAI,EAEvB,MAAMC,EADQ,SAAS,cAAc,eAAe,EAC1B,sBAAqB,EAAG,OAClD,OAAO,SAAS,CAAC,IAAIA,EAAc,EAAG,WAAW,QAAQ,CAAC,EACrC,SAAS,iBAAiB,eAAe,EAAE,QAC7CJ,IACfF,IACAI,EAAS,MAAM,CACX,QAAQ,+DACpB,CAAS,EAET,MAAc,CACVA,EAAS,MAAM,CACX,QAAQ,6BAChB,CAAK,CACL,QAAC,CACGN,GACJ,CACA,CAAC"}